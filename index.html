<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SENTINEL ‚Äî Financial Forensics Engine</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- Particle Background -->
<canvas id="bgCanvas"></canvas>

<div id="app">

  <!-- ‚ïê‚ïê HEADER ‚ïê‚ïê -->
  <header>
    <a class="logo-group" href="#">
      <div class="logo-icon">
        <!-- Animated SVG Logo -->
        <svg viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">
          <!-- Outer hex -->
          <polygon points="22,2 40,12 40,32 22,42 4,32 4,12"
            fill="none" stroke="#00e5ff" stroke-width="1.2" opacity="0.6"/>
          <!-- Inner hex -->
          <polygon points="22,8 35,15.5 35,28.5 22,36 9,28.5 9,15.5"
            fill="none" stroke="#00e5ff" stroke-width="0.8" opacity="0.4"/>
          <!-- Eye / Shield center -->
          <circle cx="22" cy="22" r="6" fill="none" stroke="#00e5ff" stroke-width="1.5"/>
          <circle cx="22" cy="22" r="2.5" fill="#00e5ff"/>
          <!-- Cross hairs -->
          <line x1="22" y1="14" x2="22" y2="16" stroke="#00e5ff" stroke-width="1.5"/>
          <line x1="22" y1="28" x2="22" y2="30" stroke="#00e5ff" stroke-width="1.5"/>
          <line x1="14" y1="22" x2="16" y2="22" stroke="#00e5ff" stroke-width="1.5"/>
          <line x1="28" y1="22" x2="30" y2="22" stroke="#00e5ff" stroke-width="1.5"/>
          <!-- Corner ticks on outer hex -->
          <line x1="22" y1="2" x2="22" y2="5" stroke="#ff2251" stroke-width="2"/>
          <line x1="40" y1="32" x2="37.4" y2="30.5" stroke="#ff2251" stroke-width="2"/>
          <line x1="4" y1="32" x2="6.6" y2="30.5" stroke="#ff2251" stroke-width="2"/>
        </svg>
      </div>
      <div class="logo-text">
        <span class="logo-name">SENTINEL</span>
        <span class="logo-sub">Financial Forensics Engine v2.0</span>
      </div>
    </a>

    <nav>
      <button class="nav-pill active">Dashboard</button>
      <button class="nav-pill">Analytics</button>
      <button class="nav-pill">Reports</button>
      <button class="nav-pill">Config</button>
    </nav>

    <div class="status-cluster">
      <div class="status-item"><span class="pulse-dot"></span> ENGINE READY</div>
      <div class="status-item"><span class="pulse-dot amber"></span> <span id="liveTime">00:00:00</span></div>
      <div class="status-item"><span class="pulse-dot red" style="animation-duration:0.8s"></span> LIVE</div>
    </div>
  </header>

  <!-- Ticker -->
  <div class="ticker-bar">
    <div class="ticker-label">SENTINEL</div>
    <div class="ticker-track" id="tickerTrack">
      <span class="ticker-item">CYCLE DETECTION<span>ACTIVE</span></span>
      <span class="ticker-item">SMURFING ANALYSIS<span>ACTIVE</span></span>
      <span class="ticker-item">SHELL NETWORK SCAN<span>ACTIVE</span></span>
      <span class="ticker-item">FALSE POSITIVE SHIELD<span>ENABLED</span></span>
      <span class="ticker-item">GRAPH ENGINE<span>READY</span></span>
      <span class="ticker-item">AML COMPLIANCE<span>v2.0</span></span>
      <span class="ticker-item">PRECISION TARGET<span>‚â•70%</span></span>
      <span class="ticker-item">RECALL TARGET<span>‚â•60%</span></span>
      <span class="ticker-item">CYCLE DETECTION<span>ACTIVE</span></span>
      <span class="ticker-item">SMURFING ANALYSIS<span>ACTIVE</span></span>
      <span class="ticker-item">SHELL NETWORK SCAN<span>ACTIVE</span></span>
      <span class="ticker-item">FALSE POSITIVE SHIELD<span>ENABLED</span></span>
      <span class="ticker-item">GRAPH ENGINE<span>READY</span></span>
      <span class="ticker-item">AML COMPLIANCE<span>v2.0</span></span>
      <span class="ticker-item">PRECISION TARGET<span>‚â•70%</span></span>
      <span class="ticker-item">RECALL TARGET<span>‚â•60%</span></span>
    </div>
  </div>

  <!-- ‚ïê‚ïê HERO ‚ïê‚ïê -->
  <div class="hero" id="heroSection">
    <div class="hero-hexgrid"></div>

    <div class="hero-badge">‚óÜ AML / FORENSIC INTELLIGENCE PLATFORM ‚óÜ</div>

    <h1 class="hero-title">
      <span class="line1">EXPOSE</span>
      <span class="line2">MONEY MULING</span>
      <span class="line3">FINANCIAL FORENSICS ENGINE</span>
    </h1>

    <p class="hero-desc">
      Upload transaction CSV data. <strong>SENTINEL</strong> maps the network graph,
      detects fraud rings via cycle analysis, smurfing patterns &amp;
      shell layering ‚Äî then delivers a scored intelligence report.
    </p>

    <div class="hero-divider">
      <div class="hero-divider-icon">‚ú¶</div>
    </div>

    <div class="feature-row">
      <div class="feature-chip"><div class="chip-icon c">‚Üª</div> CYCLE DETECTION 3‚Äì5 HOPS</div>
      <div class="feature-chip"><div class="chip-icon a">‚ö°</div> SMURFING / FAN PATTERNS</div>
      <div class="feature-chip"><div class="chip-icon r">‚óà</div> SHELL NETWORK CHAINS</div>
      <div class="feature-chip"><div class="chip-icon g">‚úì</div> FALSE POSITIVE SHIELD</div>
      <div class="feature-chip"><div class="chip-icon c">‚¨á</div> JSON REPORT EXPORT</div>
      <div class="feature-chip"><div class="chip-icon a">‚¶ø</div> INTERACTIVE GRAPH</div>
    </div>
  </div>

  <!-- ‚ïê‚ïê UPLOAD ‚ïê‚ïê -->
  <div class="upload-section" id="uploadSection">

    <div class="drop-zone" id="dropZone">
      <div class="dz-corner tl"></div>
      <div class="dz-corner tr"></div>
      <div class="dz-corner bl"></div>
      <div class="dz-corner br"></div>

      <div class="dz-inner">
        <!-- Big center logo -->
        <div class="dz-logo">
          <div class="dz-orbit"></div>
          <svg viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Outer ring -->
            <circle cx="45" cy="45" r="42" stroke="#00e5ff" stroke-width="0.8" opacity="0.3"/>
            <circle cx="45" cy="45" r="36" stroke="#00e5ff" stroke-width="0.5" opacity="0.2" stroke-dasharray="4 4"/>
            <!-- Hex shield -->
            <polygon points="45,10 74,27.5 74,62.5 45,80 16,62.5 16,27.5"
              fill="rgba(0,229,255,0.04)" stroke="#00e5ff" stroke-width="1.2"/>
            <!-- Inner triangle -->
            <polygon points="45,24 63,56 27,56"
              fill="rgba(0,229,255,0.06)" stroke="#00e5ff" stroke-width="1" opacity="0.6"/>
            <!-- Center eye -->
            <circle cx="45" cy="45" r="10" fill="none" stroke="#00e5ff" stroke-width="1.5"/>
            <circle cx="45" cy="45" r="4" fill="#00e5ff"/>
            <circle cx="45" cy="45" r="1.5" fill="#020408"/>
            <!-- Cardinal marks -->
            <line x1="45" y1="33" x2="45" y2="36" stroke="#ff2251" stroke-width="2"/>
            <line x1="45" y1="54" x2="45" y2="57" stroke="#ff2251" stroke-width="2"/>
            <line x1="33" y1="45" x2="36" y2="45" stroke="#ff2251" stroke-width="2"/>
            <line x1="54" y1="45" x2="57" y2="45" stroke="#ff2251" stroke-width="2"/>
            <!-- Corner dots -->
            <circle cx="45" cy="10" r="2" fill="#00e5ff"/>
            <circle cx="74" cy="27.5" r="2" fill="#00e5ff"/>
            <circle cx="74" cy="62.5" r="2" fill="#00e5ff"/>
            <circle cx="45" cy="80" r="2" fill="#00e5ff"/>
            <circle cx="16" cy="62.5" r="2" fill="#00e5ff"/>
            <circle cx="16" cy="27.5" r="2" fill="#00e5ff"/>
          </svg>
        </div>

        <div class="dz-title">DROP CSV FILE HERE</div>
        <div class="dz-sub">
          Drag &amp; drop your transaction data or click to browse<br>
          Max 10,000 transactions ‚Äî results in under 30 seconds
        </div>

        <div class="schema-pills">
          <div class="schema-pill"><span class="sp-type">STR</span> transaction_id</div>
          <div class="schema-pill"><span class="sp-type">STR</span> sender_id</div>
          <div class="schema-pill"><span class="sp-type">STR</span> receiver_id</div>
          <div class="schema-pill"><span class="sp-type">FLT</span> amount</div>
          <div class="schema-pill"><span class="sp-type">DT</span> timestamp</div>
        </div>

        <div class="btn-group">
          <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">
            ‚¨Ü SELECT CSV FILE
          </button>
          <button class="btn btn-ghost" onclick="loadDemoData()">
            ‚óà LOAD DEMO DATA
          </button>
        </div>
        <input type="file" id="fileInput" accept=".csv">
      </div>
    </div>

    <div class="demo-link">
      No file? <a onclick="loadDemoData()">Load demo dataset</a> ‚Äî includes planted fraud rings &amp; legitimate account traps
    </div>

    <!-- Progress -->
    <div class="progress-wrap" id="progressWrap">
      <div class="progress-header">
        <div class="progress-title" id="progressLabel">INITIALIZING...</div>
        <div class="progress-pct" id="progressPct">0%</div>
      </div>
      <div class="progress-track">
        <div class="progress-bar" id="progressBar" style="width:0%"></div>
      </div>
      <div class="progress-steps">
        <span class="progress-step" id="ps1">PARSE CSV</span>
        <span class="progress-step" id="ps2">BUILD GRAPH</span>
        <span class="progress-step" id="ps3">DETECT RINGS</span>
        <span class="progress-step" id="ps4">SCORE</span>
        <span class="progress-step" id="ps5">RENDER</span>
      </div>
    </div>

  </div><!-- /upload-section -->

  <!-- ‚ïê‚ïê RESULTS ‚ïê‚ïê -->
  <div id="results">

    <div style="padding: 0 40px; margin-bottom: 0;">
      <div class="action-bar">
        <div class="action-bar-left">
          <button class="btn btn-ghost" onclick="resetApp()">‚Ü© NEW UPLOAD</button>
        </div>
        <div class="spacer"></div>
        <button class="btn btn-danger" onclick="downloadJSON()">
          ‚¨á DOWNLOAD INTEL REPORT
        </button>
      </div>
    </div>

    <div style="padding: 0 40px 28px;">
      <div class="section-label">THREAT SUMMARY</div>

      <div class="stats-strip">
        <div class="stat-block c" data-n="‚àû">
          <div class="stat-label"><span class="stat-ico c">‚óé</span> Total Accounts</div>
          <div class="stat-value" id="statAccounts">0</div>
          <div class="stat-meta">accounts analyzed</div>
        </div>
        <div class="stat-block r" data-n="!">
          <div class="stat-label"><span class="stat-ico r">‚ö†</span> Flagged</div>
          <div class="stat-value" id="statSuspicious">0</div>
          <div class="stat-meta">suspicious accounts</div>
        </div>
        <div class="stat-block a" data-n="‚óà">
          <div class="stat-label"><span class="stat-ico a">‚óà</span> Fraud Rings</div>
          <div class="stat-value" id="statRings">0</div>
          <div class="stat-meta">rings detected</div>
        </div>
        <div class="stat-block g" data-n="s">
          <div class="stat-label"><span class="stat-ico g">‚ö°</span> Speed</div>
          <div class="stat-value" id="statTime">0s</div>
          <div class="stat-meta">processing time</div>
        </div>
      </div>
    </div>

    <!-- Graph + Sidebar -->
    <div style="padding: 0 40px; margin-bottom: 2px;">
      <div class="section-label">NETWORK GRAPH</div>
      <div class="main-grid">
        <div class="panel">
          <div class="panel-head">
            <div class="panel-title">Transaction Network</div>
            <div class="graph-legend" id="graphLegend">
              <div class="legend-dot-item"><div class="ldot" style="background:#2a5a7a"></div>Normal</div>
              <div class="legend-dot-item"><div class="ldot" style="background:var(--red)"></div>Suspicious</div>
              <div class="legend-dot-item"><div class="ldot" style="background:#444"></div>Merchant</div>
            </div>
          </div>
          <canvas id="graphCanvas"></canvas>
        </div>

        <div class="panel">
          <div class="panel-head">
            <div class="panel-title">Flagged Accounts</div>
            <div class="panel-meta" id="suspCountBadge">0 accounts</div>
          </div>
          <div class="acc-list" id="accList"></div>
        </div>
      </div>
    </div>

    <!-- Rings Table -->
    <div style="padding: 0 40px 40px;">
      <div class="section-label">FRAUD RING INTELLIGENCE</div>
      <div class="table-panel">
        <div class="panel-head">
          <div class="panel-title">Detected Rings</div>
          <div class="panel-meta" id="ringCountBadge">0 rings</div>
        </div>
        <div class="rings-table-wrap">
          <table>
            <thead>
              <tr>
                <th>Ring ID</th>
                <th>Pattern</th>
                <th>Members</th>
                <th>Risk Score</th>
                <th>Account IDs</th>
              </tr>
            </thead>
            <tbody id="ringsBody"></tbody>
          </table>
        </div>
      </div>
    </div>

  </div><!-- /results -->

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       ANALYTICS TAB PAGE
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="tab-page" id="tabAnalytics">
    <div class="tp-section">ANALYTICS</div>
    <div class="tp-title">THREAT ANALYTICS</div>
    <div class="tp-sub" id="anlSub">Run an analysis first ‚Äî or load demo data ‚Äî to populate the analytics dashboard.</div>

    <!-- KPI Row -->
    <div class="anl-kpi-row">
      <div class="anl-kpi" style="--kpi-color:var(--red)">
        <div class="anl-kpi-val" id="aklRiskRate">‚Äî</div>
        <div class="anl-kpi-lbl">Fraud Rate</div>
        <div class="anl-kpi-delta delta-up" id="aklRiskDelta">Awaiting data</div>
      </div>
      <div class="anl-kpi" style="--kpi-color:var(--amber)">
        <div class="anl-kpi-val" id="aklAvgScore">‚Äî</div>
        <div class="anl-kpi-lbl">Avg Risk Score</div>
        <div class="anl-kpi-delta" id="aklScoreDelta">Awaiting data</div>
      </div>
      <div class="anl-kpi" style="--kpi-color:var(--cyan)">
        <div class="anl-kpi-val" id="aklTotalVol">‚Äî</div>
        <div class="anl-kpi-lbl">Flagged Volume $</div>
        <div class="anl-kpi-delta" id="aklVolDelta">Awaiting data</div>
      </div>
      <div class="anl-kpi" style="--kpi-color:var(--green)">
        <div class="anl-kpi-val" id="aklPrecision">‚Äî</div>
        <div class="anl-kpi-lbl">Detection Precision</div>
        <div class="anl-kpi-delta delta-ok" id="aklPreDelta">Awaiting data</div>
      </div>
    </div>

    <!-- Row 2: Pattern breakdown + Score histogram -->
    <div class="anl-grid-2">
      <!-- Pattern Breakdown -->
      <div class="anl-panel">
        <div class="anl-panel-title">PATTERN BREAKDOWN <span class="anl-panel-badge" id="anlPatBadge">0 RINGS</span></div>
        <div id="anlPatternBars" class="bar-chart">
          <div class="empty-state"><div class="empty-icon">‚óé</div><div class="empty-text">No analysis data yet</div></div>
        </div>
      </div>
      <!-- Score Histogram -->
      <div class="anl-panel">
        <div class="anl-panel-title">SUSPICION SCORE DISTRIBUTION <span class="anl-panel-badge" id="anlHistBadge">0 ACCOUNTS</span></div>
        <div class="histogram" id="anlHistogram">
          <!-- filled by JS -->
        </div>
        <div style="display:flex;justify-content:space-between;margin-top:6px;font-family:var(--font-mono);font-size:9px;color:var(--muted)">
          <span>0</span><span>20</span><span>40</span><span>60</span><span>80</span><span>100</span>
        </div>
      </div>
    </div>

    <!-- Row 3: Donut (ring type mix) + Top Accounts -->
    <div class="anl-grid-2">
      <!-- Ring Type Donut -->
      <div class="anl-panel">
        <div class="anl-panel-title">FRAUD RING TYPE MIX</div>
        <div class="donut-wrap" id="anlDonutWrap">
          <div class="empty-state" style="flex:1;border:none;padding:20px"><div class="empty-icon">‚óà</div><div class="empty-text">No rings detected yet</div></div>
        </div>
      </div>
      <!-- Top Risky Accounts -->
      <div class="anl-panel">
        <div class="anl-panel-title">TOP RISK ACCOUNTS <span class="anl-panel-badge">TOP 8</span></div>
        <div class="bar-chart" id="anlTopAccounts">
          <div class="empty-state"><div class="empty-icon">‚ö†</div><div class="empty-text">No flagged accounts</div></div>
        </div>
      </div>
    </div>

    <!-- Row 4: Detection timeline + Velocity heatmap -->
    <div class="anl-grid-2">
      <!-- Detection event timeline -->
      <div class="anl-panel">
        <div class="anl-panel-title">DETECTION EVENT TIMELINE</div>
        <div class="timeline" id="anlTimeline">
          <div class="empty-state"><div class="empty-icon">‚è±</div><div class="empty-text">Events appear after analysis</div></div>
        </div>
      </div>
      <!-- Network stats -->
      <div class="anl-panel">
        <div class="anl-panel-title">NETWORK TOPOLOGY STATS</div>
        <div class="bar-chart" id="anlNetStats">
          <div class="empty-state"><div class="empty-icon">‚¶ø</div><div class="empty-text">Graph metrics appear after analysis</div></div>
        </div>
      </div>
    </div>

    <!-- Scatter canvas ‚Äî score vs degree -->
    <div class="anl-panel" style="margin-bottom:0">
      <div class="anl-panel-title">RISK SCORE vs. TRANSACTION DEGREE ‚Äî SCATTER PLOT <span class="anl-panel-badge" id="anlScatterBadge">AWAITING DATA</span></div>
      <canvas id="scatterCanvas" width="1200" height="180"></canvas>
      <div style="display:flex;gap:20px;margin-top:8px;font-family:var(--font-mono);font-size:9px;color:var(--muted)">
        <span>‚óè Suspicious (red = critical ‚â•70, amber = high ‚â•40, green = low)</span>
        <span>‚óè X-axis: total transaction connections</span>
        <span>‚óè Y-axis: suspicion score (0‚Äì100)</span>
      </div>
    </div>
  </div><!-- /tabAnalytics -->


  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       REPORTS TAB PAGE
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="tab-page" id="tabReports">
    <div class="tp-section">REPORTS</div>
    <div class="tp-title">INTELLIGENCE REPORTS</div>
    <div class="tp-sub">Generate, preview, and export structured intelligence reports from the current analysis session.</div>

    <!-- Report type cards -->
    <div class="report-card-grid">
      <div class="report-card" onclick="generateReport('executive')">
        <div class="report-card-badge">PDF READY</div>
        <div class="report-card-icon">üìã</div>
        <div class="report-card-name">EXECUTIVE SUMMARY</div>
        <div class="report-card-desc">High-level threat overview with KPIs, ring counts, and recommended actions for leadership.</div>
      </div>
      <div class="report-card" onclick="generateReport('technical')">
        <div class="report-card-badge">JSON / CSV</div>
        <div class="report-card-icon">üî¨</div>
        <div class="report-card-name">TECHNICAL INTELLIGENCE</div>
        <div class="report-card-desc">Full account scoring, ring membership, pattern tags, confidence levels, and graph metrics.</div>
      </div>
      <div class="report-card" onclick="generateReport('sar')">
        <div class="report-card-badge">SAR FORMAT</div>
        <div class="report-card-icon">‚öñÔ∏è</div>
        <div class="report-card-name">SAR / COMPLIANCE</div>
        <div class="report-card-desc">Suspicious Activity Report draft pre-formatted for FinCEN / regulatory submission.</div>
      </div>
      <div class="report-card" onclick="generateReport('rings')">
        <div class="report-card-badge">CSV</div>
        <div class="report-card-icon">üîó</div>
        <div class="report-card-name">RING MEMBERSHIP</div>
        <div class="report-card-desc">Complete fraud ring members, pattern types, risk scores and transaction volumes per ring.</div>
      </div>
      <div class="report-card" onclick="generateReport('accounts')">
        <div class="report-card-badge">CSV</div>
        <div class="report-card-icon">üë§</div>
        <div class="report-card-name">ACCOUNT RISK REGISTER</div>
        <div class="report-card-desc">All flagged accounts sorted by suspicion score with detected patterns and ring assignment.</div>
      </div>
      <div class="report-card" onclick="generateReport('network')">
        <div class="report-card-badge">JSON</div>
        <div class="report-card-icon">‚¶ø</div>
        <div class="report-card-name">GRAPH EXPORT (JSON)</div>
        <div class="report-card-desc">Full node-link graph data in D3-compatible JSON format for external tools and visualization.</div>
      </div>
    </div>

    <!-- Export row -->
    <div class="export-row">
      <button class="btn-export" onclick="exportJSON()"><span class="ico">‚¨á</span> FULL JSON REPORT</button>
      <button class="btn-export" onclick="exportCSVAccounts()"><span class="ico">üìä</span> ACCOUNTS CSV</button>
      <button class="btn-export" onclick="exportCSVRings()"><span class="ico">üîó</span> RINGS CSV</button>
      <button class="btn-export" onclick="exportCSVTransactions()"><span class="ico">üí≥</span> TRANSACTIONS CSV</button>
      <button class="btn-export" onclick="copyReport()"><span class="ico">‚ßâ</span> COPY SUMMARY</button>
    </div>

    <!-- Live report preview -->
    <div class="rpt-preview" id="rptPreviewPanel">
      <div class="rpt-preview-title" id="rptPreviewTitle">REPORT PREVIEW ‚Äî SELECT A REPORT TYPE ABOVE</div>
      <div id="rptPreviewBody">
        <div class="empty-state"><div class="empty-icon">üìã</div><div class="empty-text">Select a report card above to preview its contents.<br>Run an analysis first for live data.</div></div>
      </div>
    </div>
  </div><!-- /tabReports -->


  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       CONFIG TAB PAGE
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="tab-page" id="tabConfig">
    <div class="tp-section">CONFIGURATION</div>
    <div class="tp-title">ENGINE CONFIGURATION</div>
    <div class="tp-sub">Tune detection thresholds, scoring weights, graph rendering, and export settings. Changes apply on next analysis run.</div>

    <div class="cfg-status-bar" id="cfgStatusBar">
      ‚¨° &nbsp;ENGINE READY ‚Äî All systems nominal ¬∑ v2.0.0 ¬∑ Build 20240615
    </div>

    <div class="cfg-grid">
      <!-- Detection thresholds -->
      <div class="cfg-panel">
        <div class="cfg-title">‚öô DETECTION THRESHOLDS</div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Min Cycle Length</div><div class="cfg-row-sub">Shortest circular path to flag (hops)</div></div>
          <input class="cfg-input" id="cfgMinCycle" type="number" min="2" max="6" value="3">
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Max Cycle Depth</div><div class="cfg-row-sub">Deepest cycle to traverse (hops)</div></div>
          <input class="cfg-input" id="cfgMaxCycle" type="number" min="3" max="10" value="5">
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Fan-in / Fan-out Min</div><div class="cfg-row-sub">Min connections to flag smurfing</div></div>
          <input class="cfg-input" id="cfgFanMin" type="number" min="3" max="25" value="10">
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Shell Chain Max Tx</div><div class="cfg-row-sub">Max transactions for shell account</div></div>
          <input class="cfg-input" id="cfgShellMax" type="number" min="2" max="10" value="4">
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Merchant Tx Threshold</div><div class="cfg-row-sub">Tx count above which node = merchant</div></div>
          <input class="cfg-input" id="cfgMerchThresh" type="number" min="10" max="500" value="50">
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Velocity Window (hrs)</div><div class="cfg-row-sub">Temporal clustering detection window</div></div>
          <input class="cfg-input" id="cfgVelocityWin" type="number" min="1" max="168" value="72">
        </div>
      </div>

      <!-- Scoring weights -->
      <div class="cfg-panel">
        <div class="cfg-title">‚ö° SCORING WEIGHTS</div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Cycle Pattern Score</div><div class="cfg-row-sub">Base suspicion added for cycle detection</div></div>
          <input class="cfg-input" id="cfgScoreCycle" type="number" min="10" max="100" value="60">
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Fan Pattern Score</div><div class="cfg-row-sub">Base score for fan-in / fan-out</div></div>
          <input class="cfg-input" id="cfgScoreFan" type="number" min="10" max="100" value="50">
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Shell Pattern Score</div><div class="cfg-row-sub">Base score for shell network chains</div></div>
          <input class="cfg-input" id="cfgScoreShell" type="number" min="10" max="100" value="45">
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Velocity Bonus</div><div class="cfg-row-sub">Added score for high-velocity clustering</div></div>
          <input class="cfg-input" id="cfgScoreVelocity" type="number" min="0" max="40" value="20">
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Degree Bonus</div><div class="cfg-row-sub">Added for high in/out degree accounts</div></div>
          <input class="cfg-input" id="cfgScoreDegree" type="number" min="0" max="30" value="10">
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Ring Risk Bonus</div><div class="cfg-row-sub">Ring-level bonus on top of avg member score</div></div>
          <input class="cfg-input" id="cfgScoreRingBonus" type="number" min="0" max="40" value="20">
        </div>
      </div>

      <!-- Graph rendering -->
      <div class="cfg-panel">
        <div class="cfg-title">‚¶ø GRAPH RENDERING</div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Max Nodes Displayed</div><div class="cfg-row-sub">Cap before suspicious-priority sampling</div></div>
          <input class="cfg-input" id="cfgMaxNodes" type="number" min="50" max="2000" value="300">
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Simulation Steps</div><div class="cfg-row-sub">Force-directed layout iterations</div></div>
          <input class="cfg-input" id="cfgSimSteps" type="number" min="50" max="500" value="200">
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Show Node Labels</div><div class="cfg-row-sub">Labels when graph has ‚â§60 nodes</div></div>
          <label class="cfg-toggle" onclick="toggleCfg(this)">
            <input type="checkbox" id="cfgShowLabels" checked>
            <div class="cfg-toggle-track"></div>
            <div class="cfg-toggle-thumb"></div>
          </label>
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Animate Pulses</div><div class="cfg-row-sub">Animated rings on suspicious nodes</div></div>
          <label class="cfg-toggle" onclick="toggleCfg(this)">
            <input type="checkbox" id="cfgAnimPulse" checked>
            <div class="cfg-toggle-track"></div>
            <div class="cfg-toggle-thumb"></div>
          </label>
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Color Theme</div><div class="cfg-row-sub">Graph node color mode</div></div>
          <select class="cfg-select" id="cfgColorMode">
            <option value="ring">By Ring</option>
            <option value="score">By Score</option>
            <option value="pattern">By Pattern</option>
          </select>
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Repulsion Force</div><div class="cfg-row-sub">Node separation force (higher = spread)</div></div>
          <input class="cfg-input" id="cfgRepulse" type="number" min="500" max="10000" value="3000">
        </div>
      </div>

      <!-- Export / UI settings -->
      <div class="cfg-panel">
        <div class="cfg-title">üìã EXPORT & DISPLAY</div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Auto-Download on Analysis</div><div class="cfg-row-sub">Saves JSON report automatically</div></div>
          <label class="cfg-toggle" onclick="toggleCfg(this)">
            <input type="checkbox" id="cfgAutoDownload">
            <div class="cfg-toggle-track"></div>
            <div class="cfg-toggle-thumb"></div>
          </label>
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Include Raw Transactions</div><div class="cfg-row-sub">Embed full tx list in JSON export</div></div>
          <label class="cfg-toggle" onclick="toggleCfg(this)">
            <input type="checkbox" id="cfgIncludeTx">
            <div class="cfg-toggle-track"></div>
            <div class="cfg-toggle-thumb"></div>
          </label>
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Particle Background</div><div class="cfg-row-sub">Animated network background canvas</div></div>
          <label class="cfg-toggle" onclick="toggleCfg(this)">
            <input type="checkbox" id="cfgParticles" checked>
            <div class="cfg-toggle-track"></div>
            <div class="cfg-toggle-thumb"></div>
          </label>
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Scanlines Overlay</div><div class="cfg-row-sub">CRT scanline aesthetic filter</div></div>
          <label class="cfg-toggle" onclick="toggleCfg(this)">
            <input type="checkbox" id="cfgScanlines" checked>
            <div class="cfg-toggle-track"></div>
            <div class="cfg-toggle-thumb"></div>
          </label>
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">UI Theme</div><div class="cfg-row-sub">Interface color palette</div></div>
          <div class="theme-chips">
            <div class="theme-chip active" onclick="setTheme('cyan',this)">CYAN</div>
            <div class="theme-chip" onclick="setTheme('red',this)">RED</div>
            <div class="theme-chip" onclick="setTheme('amber',this)">AMBER</div>
            <div class="theme-chip" onclick="setTheme('green',this)">GREEN</div>
          </div>
        </div>
        <div class="cfg-row">
          <div><div class="cfg-row-label">Report Filename Prefix</div><div class="cfg-row-sub">Prefix for downloaded report files</div></div>
          <input class="cfg-input" id="cfgFilePrefix" type="text" value="SENTINEL" style="width:120px;text-align:left">
        </div>
      </div>
    </div>

    <!-- Action buttons -->
    <div style="display:flex;gap:12px;margin-bottom:28px">
      <button class="cfg-save-btn" onclick="saveConfig()">SAVE CONFIG</button>
      <button class="cfg-reset-btn" onclick="resetConfig()">RESET DEFAULTS</button>
    </div>

    <!-- Config activity log -->
    <div class="anl-panel">
      <div class="anl-panel-title">SYSTEM LOG <span class="anl-panel-badge" id="cfgLogBadge">0 ENTRIES</span></div>
      <div class="cfg-log" id="cfgLog">
        <span class="log-line-info">[BOOT] SENTINEL engine initialized ‚Äî v2.0.0</span><br>
        <span class="log-line-ok">[OK] All detection modules loaded</span><br>
        <span class="log-line-ok">[OK] Graph engine ready</span><br>
        <span class="log-line-info">[INFO] Awaiting analysis data...</span><br>
      </div>
    </div>
  </div><!-- /tabConfig -->

  <!-- ‚ïê‚ïê FOOTER ‚ïê‚ïê -->
  <footer>
    <div class="footer-logo">SENTINEL<span>‚Ñ¢</span> Financial Forensics Engine</div>
    <div class="footer-links">
      <div class="footer-link">Documentation</div>
      <div class="footer-link">API Reference</div>
      <div class="footer-link">AML Compliance</div>
      <div class="footer-link">Support</div>
    </div>
    <div style="font-family:var(--font-mono);font-size:9px;color:var(--muted);letter-spacing:1px;">
      v2.0.0 ‚Äî BUILD 20240615
    </div>
  </footer>

</div><!-- /app -->

<!-- Tooltip -->
<div id="tooltip"><div class="tt-inner" id="ttInner"></div></div>
</body>
<script src="app.js"></script>
</html>
